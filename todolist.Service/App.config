<?xml version="1.0" encoding="utf-8"?>
<configuration>

	<!-- 1. EF Connection String for your AppDbContext -->
	<connectionStrings>
		<add name="TodolistConnection"
			 connectionString="Server=(localdb)\MSSQLLocalDB;Database=todolistsam;Integrated Security=True;MultipleActiveResultSets=True"
			 providerName="System.Data.SqlClient" />
	</connectionStrings>

	<!-- 2. Optional appSettings -->
	<appSettings>
		<add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
	</appSettings>

	<!-- 3. WCF Service Model Configuration -->
	<system.serviceModel>

		<!-- 3.1 Services Definitions -->
		<services>
			<!-- UserService -->
			<service name="Todolist.Services.UserService" behaviorConfiguration="ServiceBehavior">
				<host>
					<baseAddresses>
						<add baseAddress="http://localhost:8000/Todolist" />
					</baseAddresses>
				</host>
				<endpoint
				  address="UserService"
				  binding="basicHttpBinding"
				  contract="Todolist.Services.IUserService" />
				<!-- Metadata endpoint -->
				<endpoint
				  address="UserService/mex"
				  binding="mexHttpBinding"
				  contract="IMetadataExchange" />
			</service>

			<!-- TaskService -->
			<service name="Todolist.Services.TaskService" behaviorConfiguration="ServiceBehavior">
				<host>
					<baseAddresses>
						<add baseAddress="http://localhost:8000/Todolist" />
					</baseAddresses>
				</host>
				<endpoint
				  address="TaskService"
				  binding="basicHttpBinding"
				  contract="Todolist.Services.ITaskService" />
				<!-- Metadata endpoint -->
				<endpoint
				  address="TaskService/mex"
				  binding="mexHttpBinding"
				  contract="IMetadataExchange" />
			</service>
		</services>

		<!-- 3.2 Behaviors -->
		<behaviors>
			<serviceBehaviors>
				<behavior name="ServiceBehavior">
					<!-- Publish metadata over HTTP -->
					<serviceMetadata httpGetEnabled="true" />
					<!-- Include exception details in faults for debugging (disable in prod) -->
					<serviceDebug includeExceptionDetailInFaults="false" />
				</behavior>
			</serviceBehaviors>
		</behaviors>

		<!-- 3.3 Bindings (use defaults for basicHttpBinding and mexHttpBinding) -->
		<bindings>
			<!-- you can customize timeouts, maxReceivedMessageSize, etc., here if needed -->
		</bindings>

	</system.serviceModel>

	<!-- 4. Entity Framework Provider Configuration -->
	<entityFramework>
		<providers>
			<provider
			  invariantName="System.Data.SqlClient"
			  type="System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer" />
		</providers>
	</entityFramework>

</configuration>
